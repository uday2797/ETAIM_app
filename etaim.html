Of course. Here is a fully developed, single-file, functional web application for ETAIM based on your detailed specifications.

This application is built using React and Tailwind CSS and is self-contained in a single HTML file. You can save the code below as `etaim.html` and open it directly in a modern web browser like Chrome or Firefox to run it.

### Key Features Implemented:
*   **Full Authentication Flow:** Login, Guest access, and user-specific greetings. The user's name is dynamically pulled from the login credentials.
*   **Dynamic Home Screen:** Time-based greetings (Good Morning, Afternoon, Evening) and the user's name.
*   **Live Location Search:** "From" and "To" search bars with auto-suggestions as you type.
*   **Commute Module:** After searching, you are directed to a detailed commute page showing mocked data for Rapido, Ola, and Uber.
*   **Smart Recommendations:** The app recommends the cheapest and fastest commute options. It also provides weather-based suggestions (e.g., recommending a cab if it's raining) and time-based safety (no bikes late at night).
*   **Food Module:** A dedicated tab that compares mocked options from Swiggy and Zomato for both your current and destination locations, with ETAs and recommendations.
*   **AI Dashboard:** The centerpiece of the application. After you set your commute, you can view a personalized AI-powered plan.
*   **AI Insights:** The dashboard provides a clear, actionable summary telling you exactly when to leave and when to order food to optimize your schedule, including buffer time.
*   **Modern UI/UX:** A clean, responsive design using Tailwind CSS with clear navigation and interactive elements.

### Login Credentials
Use these credentials on the login page to experience the app as different users:
*   **Email:** `admin@etaim.com` | **Password:** `admin123`
*   **Email:** `user@etaim.com` | **Password:** `user123`
*   **Email:** `demo@etaim.com` | **Password:** `demo123`
*   **Email:** `uday@etaim.com` | **Password:** `admin123`

---

### ETAIM Application Code

Save the following code as `etaim.html` and open it in your web browser.

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETAIM - AI Daily Dashboard</title>
    <!-- React and Babel for JSX transpilation -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- React Router for navigation -->
    <script src="https://unpkg.com/react-router-dom@6.14.2/dist/umd/react-router-dom.development.js"></script>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Heroicons for icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <style>
        body { background-color: #f0f2f5; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .nav-active { color: #2563eb; border-bottom: 2px solid #2563eb; }
        .nav-inactive { color: #6b7280; }
        .suggestion-item { cursor: pointer; padding: 8px 12px; }
        .suggestion-item:hover { background-color: #f3f4f6; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useContext, createContext } = React;
        const { HashRouter, Routes, Route, Link, NavLink, useNavigate, useLocation, Navigate } = ReactRouterDOM;

        // --- MOCK DATA AND APIs ---
        const mockUsers = {
            "admin@etaim.com": { name: "Admin" },
            "user@etaim.com": { name: "Alex" },
            "demo@etaim.com": { name: "Demo User" },
            "uday@etaim.com": { name: "Uday" },
            "guest@etaim.com": { name: "Guest" }
        };

        const mockLocations = [
            "HSR Layout, Bangalore", "Koramangala, Bangalore", "Indiranagar, Bangalore", "Whitefield, Bangalore",
            "Marathahalli, Bangalore", "Electronic City, Bangalore", "Jayanagar, Bangalore", "MG Road, Bangalore",
            "Kondapur, Hyderabad", "Gachibowli, Hyderabad", "Hitech City, Hyderabad", "Banjara Hills, Hyderabad"
        ];

        const getCommuteOptions = (from, to) => {
            const isRaining = Math.random() < 0.3; // 30% chance of rain
            const isNight = new Date().getHours() > 21 || new Date().getHours() < 6; // 9 PM to 6 AM
            
            return {
                weather: { isRaining, isNight, description: isRaining ? "Light rain" : "Clear skies" },
                ownVehicle: {
                    eta: 25 + Math.floor(Math.random() * 10),
                    cost: "Fuel",
                    notes: isRaining ? "Heavy traffic due to rain." : "Moderate traffic expected."
                },
                services: [
                    { name: 'Uber', icon: 'https://cdn.icon-icons.com/icons2/2407/PNG/512/uber_icon_146079.png', modes: [
                        { type: 'Cab', eta: 18 + Math.floor(Math.random() * 5), price: 250 + Math.floor(Math.random() * 50) },
                        { type: 'Auto', eta: 22 + Math.floor(Math.random() * 5), price: 150 + Math.floor(Math.random() * 30) },
                        { type: 'Bike', eta: 15 + Math.floor(Math.random() * 5), price: 80 + Math.floor(Math.random() * 20), available: !isNight },
                    ]},
                    { name: 'Ola', icon: 'https://cdn.iconscout.com/icon/free/png-256/free-ola-2-722649.png', modes: [
                        { type: 'Cab', eta: 20 + Math.floor(Math.random() * 5), price: 240 + Math.floor(Math.random() * 50) },
                        { type: 'Auto', eta: 24 + Math.floor(Math.random() * 5), price: 160 + Math.floor(Math.random() * 30) },
                        { type: 'Bike', eta: 17 + Math.floor(Math.random() * 5), price: 75 + Math.floor(Math.random() * 20), available: !isNight },
                    ]},
                    { name: 'Rapido', icon: 'https://logowik.com/content/uploads/images/rapido-bike-taxi8655.jpg', modes: [
                        { type: 'Cab', eta: 25 + Math.floor(Math.random() * 5), price: 220 + Math.floor(Math.random() * 50) },
                        { type: 'Auto', eta: 26 + Math.floor(Math.random() * 5), price: 140 + Math.floor(Math.random() * 30) },
                        { type: 'Bike', eta: 16 + Math.floor(Math.random() * 5), price: 70 + Math.floor(Math.random() * 20), available: !isNight },
                    ]},
                ]
            };
        };

        const getFoodOptions = (location) => ({
            swiggy: [
                { name: "Meghana Foods", eta: 35, cheapest: "Chicken Biryani (‚Çπ350)", best: "Special Biryani (‚Çπ450)" },
                { name: "Truffles", eta: 25, cheapest: "Classic Burger (‚Çπ280)", best: "All American Burger (‚Çπ380)" },
                { name: "Leon Grill", eta: 20, cheapest: "Chicken Doner (‚Çπ180)", best: "Peri Peri Wings (‚Çπ250)" },
            ],
            zomato: [
                 { name: "Meghana Foods", eta: 38, cheapest: "Chicken Biryani (‚Çπ360)", best: "Special Biryani (‚Çπ460)" },
                 { name: "Burger King", eta: 30, cheapest: "Whopper Jr. (‚Çπ150)", best: "Chicken Whopper (‚Çπ250)" },
                 { name: "Taco Bell", eta: 40, cheapest: "Fiesta Taco (‚Çπ120)", best: "Burrito Supreme (‚Çπ300)" },
            ]
        });

        // --- AUTHENTICATION CONTEXT ---
        const AuthContext = createContext(null);

        const AuthProvider = ({ children }) => {
            const [user, setUser] = useState(JSON.parse(localStorage.getItem('etaim_user')));
            const navigate = useNavigate();

            const login = (email, password) => {
                const validPasswords = {
                    "admin@etaim.com": "admin123", "user@etaim.com": "user123",
                    "demo@etaim.com": "demo123", "uday@etaim.com": "admin123"
                };
                if (mockUsers[email] && validPasswords[email] === password) {
                    const userData = { email, name: mockUsers[email].name };
                    localStorage.setItem('etaim_user', JSON.stringify(userData));
                    setUser(userData);
                    navigate('/');
                    return true;
                }
                return false;
            };
            
            const guestLogin = () => {
                const guestData = { email: 'guest@etaim.com', name: 'Guest' };
                localStorage.setItem('etaim_user', JSON.stringify(guestData));
                setUser(guestData);
                navigate('/');
            };

            const logout = () => {
                localStorage.removeItem('etaim_user');
                setUser(null);
                navigate('/login');
            };

            const value = { user, login, logout, guestLogin };

            return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
        };
        
        const useAuth = () => {
            return useContext(AuthContext);
        };

        // --- PROTECTED ROUTE ---
        const ProtectedRoute = ({ children }) => {
            const { user } = useAuth();
            if (!user) {
                return <Navigate to="/login" />;
            }
            return children;
        };
        
        // --- HELPER FUNCTIONS ---
        const getGreeting = () => {
            const hour = new Date().getHours();
            if (hour < 12) return "Good Morning";
            if (hour < 18) return "Good Afternoon";
            return "Good Evening";
        };

        // --- UI COMPONENTS ---
        const LocationInput = ({ value, onChange, onSuggestionClick, placeholder, suggestions }) => (
            <div className="relative w-full">
                <input
                    type="text"
                    value={value}
                    onChange={onChange}
                    placeholder={placeholder}
                    className="w-full p-4 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                />
                {suggestions.length > 0 && (
                    <div className="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg">
                        {suggestions.map(s => (
                            <div key={s} onMouseDown={() => onSuggestionClick(s)} className="suggestion-item">
                                {s}
                            </div>
                        ))}
                    </div>
                )}
            </div>
        );
        
        // --- SCREENS ---

        function LoginPage() {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const { login, guestLogin } = useAuth();
            const navigate = useNavigate();

            const handleSubmit = (e) => {
                e.preventDefault();
                setError('');
                if (!login(email, password)) {
                    setError('Invalid email or password.');
                }
            };

            return (
                <div className="flex items-center justify-center min-h-screen bg-gray-100">
                    <div className="w-full max-w-md p-8 space-y-8 bg-white rounded-xl shadow-lg">
                        <div className="text-center">
                            <h1 className="text-4xl font-bold text-blue-600">ETAIM</h1>
                            <p className="mt-2 text-gray-500">Your AI-Powered Daily Dashboard</p>
                        </div>
                        <form className="space-y-6" onSubmit={handleSubmit}>
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            <div className="relative">
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    placeholder="Email Address"
                                    className="w-full px-4 py-3 text-gray-700 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required
                                />
                            </div>
                            <div className="relative">
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="Password"
                                    className="w-full px-4 py-3 text-gray-700 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required
                                />
                            </div>
                             <div className="flex items-center justify-between text-sm">
                                <a href="#" className="font-medium text-blue-600 hover:text-blue-500">Forgot password?</a>
                                <a href="#" className="font-medium text-blue-600 hover:text-blue-500">Sign Up</a>
                            </div>
                            <div>
                                <button type="submit" className="w-full px-4 py-3 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105">
                                    Login
                                </button>
                            </div>
                             <div className="text-center">
                                <button type="button" onClick={guestLogin} className="w-full px-4 py-3 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition">
                                    Continue as Guest
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        function HomeScreen() {
            const navigate = useNavigate();
            const [from, setFrom] = useState('');
            const [to, setTo] = useState('');
            const [fromSuggestions, setFromSuggestions] = useState([]);
            const [toSuggestions, setToSuggestions] = useState([]);

            const handleSearch = () => {
                if(from && to) {
                    navigate('/commute', { state: { from, to, officeTime: "09:30" } });
                }
            };
            
            const handleFromChange = (e) => {
                const val = e.target.value;
                setFrom(val);
                if (val) {
                    setFromSuggestions(mockLocations.filter(loc => loc.toLowerCase().includes(val.toLowerCase())));
                } else {
                    setFromSuggestions([]);
                }
            };
            
            const handleToChange = (e) => {
                const val = e.target.value;
                setTo(val);
                if (val) {
                    setToSuggestions(mockLocations.filter(loc => loc.toLowerCase().includes(val.toLowerCase())));
                } else {
                    setToSuggestions([]);
                }
            };
            
            const createDashboard = () => {
                if (from && to) {
                     navigate('/dashboard-view', { state: { from, to, officeTime: "09:30" } });
                } else {
                    alert("Please set 'From' and 'To' locations first.");
                }
            };

            return (
                <div className="p-6 space-y-8 animate-fade-in">
                    <div className="text-center">
                        <h2 className="text-2xl font-bold text-gray-800">Optimize Your Morning</h2>
                        <p className="text-gray-500">Plan your commute and meals in seconds.</p>
                    </div>

                    <div className="p-6 bg-white rounded-xl shadow-md space-y-4">
                        <LocationInput 
                           value={from}
                           onChange={handleFromChange}
                           onSuggestionClick={(suggestion) => { setFrom(suggestion); setFromSuggestions([]); }}
                           placeholder="üìç From: Your current location"
                           suggestions={fromSuggestions}
                        />
                        <LocationInput 
                           value={to}
                           onChange={handleToChange}
                           onSuggestionClick={(suggestion) => { setTo(suggestion); setToSuggestions([]); }}
                           placeholder="üèÅ To: Your destination"
                           suggestions={toSuggestions}
                        />

                        <button onClick={handleSearch} className="w-full mt-4 px-4 py-3 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105 flex items-center justify-center gap-2">
                            <ion-icon name="search-outline"></ion-icon> Search Commute Options
                        </button>
                    </div>

                    <div className="text-center p-6 bg-white rounded-xl shadow-md space-y-4">
                         <h3 className="text-xl font-semibold">AI Dashboard</h3>
                         <p className="text-gray-500">Get a personalized plan for your entire morning routine.</p>
                         <button onClick={createDashboard} className="w-full mt-2 px-4 py-3 font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform transform hover:scale-105 flex items-center justify-center gap-2">
                            <ion-icon name="analytics-outline"></ion-icon> Create My AI Plan
                        </button>
                    </div>
                </div>
            );
        }

        function CommuteScreen() {
            const location = useLocation();
            const navigate = useNavigate();
            const { from, to } = location.state || { from: 'Not Set', to: 'Not Set' };
            const [commuteData, setCommuteData] = useState(null);
            const [recommendations, setRecommendations] = useState({});
            const [selectedType, setSelectedType] = useState('Cab');

            useEffect(() => {
                if (from === 'Not Set') {
                    navigate('/'); // Redirect if state is lost
                    return;
                }
                const data = getCommuteOptions(from, to);
                setCommuteData(data);

                // Recommendation Logic
                let allModes = [];
                data.services.forEach(service => {
                    service.modes.forEach(mode => {
                        if (mode.available !== false) {
                            allModes.push({ ...mode, service: service.name });
                        }
                    });
                });
                const cheapest = [...allModes].sort((a, b) => a.price - b.price)[0];
                const fastest = [...allModes].sort((a, b) => a.eta - b.eta)[0];
                
                let smartRec = fastest;
                if(data.weather.isRaining || data.weather.isNight){
                    // Prefer cab or auto if raining or night
                    const cabOrAutoOptions = allModes.filter(m => m.type === 'Cab' || m.type === 'Auto').sort((a,b) => a.eta - b.eta);
                    if(cabOrAutoOptions.length > 0) smartRec = cabOrAutoOptions[0];
                } else {
                    // Prefer bike if cool and not raining/night and it's cheapest or fastest
                    const bikeOptions = allModes.filter(m => m.type === 'Bike');
                    if (bikeOptions.includes(cheapest) || bikeOptions.includes(fastest)) {
                         smartRec = bikeOptions.sort((a,b) => a.eta - b.eta)[0];
                    }
                }
                
                setRecommendations({ cheapest, fastest, smart: smartRec });

            }, [from, to]);

            if (!commuteData) return <div className="p-6 text-center">Loading commute options...</div>;

            const filteredServices = commuteData.services.map(service => ({
                ...service,
                mode: service.modes.find(m => m.type === selectedType && m.available !== false)
            })).filter(s => s.mode);

            return (
                <div className="p-6 animate-fade-in">
                    <h2 className="text-xl font-bold mb-1">Commute: <span className="font-normal">{from} to {to}</span></h2>
                    <div className="p-3 mb-4 bg-blue-100 text-blue-800 rounded-lg text-sm flex items-center gap-2">
                        <ion-icon name="cloud-outline"></ion-icon>
                        Weather: {commuteData.weather.description}. Own vehicle ETA: ~{commuteData.ownVehicle.eta} mins.
                    </div>

                    <div className="mb-6 grid grid-cols-2 gap-4">
                        {recommendations.smart && (
                            <div className="bg-green-100 border border-green-300 p-3 rounded-lg text-center">
                                <p className="font-bold text-green-800">‚≠ê AI Pick</p>
                                <p className="text-sm text-green-700">
                                  {recommendations.smart.service} {recommendations.smart.type}
                                  ({recommendations.smart.eta} mins, ‚Çπ{recommendations.smart.price})
                                </p>
                            </div>
                        )}
                        {recommendations.cheapest && (
                             <div className="bg-yellow-100 border border-yellow-300 p-3 rounded-lg text-center">
                                <p className="font-bold text-yellow-800">üí∞ Cheapest</p>
                                <p className="text-sm text-yellow-700">
                                   {recommendations.cheapest.service} {recommendations.cheapest.type} ({recommendations.cheapest.eta} mins, ‚Çπ{recommendations.cheapest.price})
                                </p>
                            </div>
                        )}
                    </div>
                    
                    <div className="flex justify-around mb-4 bg-gray-200 p-1 rounded-lg">
                        {['Bike', 'Auto', 'Cab'].map(type => (
                            <button 
                                key={type}
                                onClick={() => setSelectedType(type)}
                                className={`w-full py-2 rounded-md font-semibold transition ${selectedType === type ? 'bg-white shadow' : 'text-gray-600'}`}
                            >
                                {type}
                            </button>
                        ))}
                    </div>

                    <div className="space-y-4">
                        {filteredServices.length > 0 ? filteredServices.map(service => (
                            <div key={service.name} className="bg-white p-4 rounded-lg shadow-md flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <img src={service.icon} alt={service.name} className="w-12 h-12 rounded-full object-cover" />
                                    <div>
                                        <p className="font-bold text-lg">{service.name}</p>
                                        <p className="text-gray-500">{service.mode.eta} mins</p>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <p className="font-bold text-lg">‚Çπ{service.mode.price}</p>
                                    <button onClick={() => alert(`Redirecting to ${service.name} to book a ${service.mode.type}...`)} className="text-sm text-blue-600 font-semibold">Book Now</button>
                                </div>
                            </div>
                        )) : (
                            <div className="text-center p-4 bg-gray-100 rounded-lg">
                                <p className="text-gray-600">No '{selectedType}' options available at this time.</p>
                                {commuteData.weather.isNight && selectedType === 'Bike' && <p className="text-sm text-red-500 mt-1">Bike services are not recommended for late-night travel.</p>}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function FoodScreen() {
             const location = useLocation();
             const { from, to } = location.state || { from: 'Current Location', to: 'Destination' };

             const [currentLocationFood, setCurrentLocationFood] = useState(null);
             const [destinationFood, setDestinationFood] = useState(null);

             useEffect(() => {
                setCurrentLocationFood(getFoodOptions(from));
                setDestinationFood(getFoodOptions(to));
             }, [from, to]);
             
             const FoodCard = ({vendor, data}) => (
                <div className="bg-white p-4 rounded-lg shadow-md mb-4">
                    <h4 className="font-bold text-lg mb-2">{vendor}</h4>
                    {data.slice(0, 3).map((item, index) => (
                        <div key={index} className="border-t pt-2 mt-2">
                             <div className="flex justify-between items-center">
                                <div>
                                    <p className="font-semibold">{item.name}</p>
                                    <p className="text-sm text-gray-500">Best: {item.best}</p>
                                    <p className="text-sm text-gray-500">Cheapest: {item.cheapest}</p>
                                </div>
                                <div className="text-right">
                                    <p className="font-bold">{item.eta} min</p>
                                    <button onClick={() => alert(`Redirecting to ${vendor} to order...`)} className="text-sm text-blue-600 font-semibold">Order</button>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
             );

             if(!currentLocationFood) return <div>Loading...</div>;

             return (
                <div className="p-6 animate-fade-in">
                    <h2 className="text-xl font-bold mb-4">Food Options</h2>
                    
                    <div className="mb-6">
                        <h3 className="font-semibold text-gray-700 mb-2">üçΩÔ∏è Near You ({from})</h3>
                        <FoodCard vendor="Swiggy" data={currentLocationFood.swiggy} />
                        <FoodCard vendor="Zomato" data={currentLocationFood.zomato} />
                    </div>
                    
                    <div>
                        <h3 className="font-semibold text-gray-700 mb-2">üìç Near Destination ({to})</h3>
                        <FoodCard vendor="Swiggy" data={destinationFood.swiggy} />
                        <FoodCard vendor="Zomato" data={destinationFood.zomato} />
                    </div>
                </div>
             );
        }

        function DashboardViewScreen() {
            const location = useLocation();
            const navigate = useNavigate();
            const { from, to, officeTime } = location.state || { from: 'Not Set', to: 'Not Set', officeTime: '09:30' };

            const [plan, setPlan] = useState(null);
            const [commuteData, setCommuteData] = useState(null);
            
            useEffect(() => {
                if (from === 'Not Set') {
                    navigate('/');
                    return;
                }
                const data = getCommuteOptions(from, to);
                setCommuteData(data);
                generateAIPlan(data);
            }, [from, to]);
            
            const generateAIPlan = (cData) => {
                // Find the AI Recommended commute option
                let allModes = [];
                cData.services.forEach(s => s.modes.forEach(m => m.available !== false && allModes.push({...m, service: s.name})));
                let recommendedCommute = allModes.sort((a,b)=>a.eta - b.eta)[0]; // Default to fastest
                if (cData.weather.isRaining || cData.weather.isNight) {
                    const saferOptions = allModes.filter(m => m.type === 'Cab' || m.type === 'Auto').sort((a,b)=>a.eta - b.eta);
                    if(saferOptions.length > 0) recommendedCommute = saferOptions[0];
                }

                const commuteETA = recommendedCommute.eta;
                const bufferTime = 15; // 15 mins buffer
                const officeTimeDate = new Date();
                const [hours, minutes] = officeTime.split(':').map(Number);
                officeTimeDate.setHours(hours, minutes, 0, 0);

                const leaveTime = new Date(officeTimeDate.getTime() - (commuteETA + bufferTime) * 60000);
                
                // Food planning
                const foodDeliveryETA = 30; // avg 30 mins
                const eatingTime = 20; // 20 mins to eat
                const orderFoodForHomeTime = new Date(leaveTime.getTime() - (foodDeliveryETA + eatingTime) * 60000);
                const orderFoodForOfficeTime = new Date(officeTimeDate.getTime() - foodDeliveryETA * 60000);

                const formatTime = (date) => date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                let weatherAdvice = `The weather is ${cData.weather.description}. `;
                if(cData.weather.isRaining) {
                    weatherAdvice += `A ${recommendedCommute.type} is recommended to avoid the rain. `;
                } else if(cData.weather.isNight) {
                    weatherAdvice += `A ${recommendedCommute.type} is recommended for safety. `;
                } else {
                    weatherAdvice += "Conditions are great for any commute type. ";
                }

                setPlan({
                    insight: `Your office login is at ${officeTime} AM. Based on real-time traffic and your selected route, you should leave by **${formatTime(leaveTime)}** to arrive on time with a ${bufferTime}-minute buffer.`,
                    foodPlan: `If you want to eat at home, order your food around **${formatTime(orderFoodForHomeTime)}**. To have it delivered to your office by your login time, order it at **${formatTime(orderFoodForOfficeTime)}**.`,
                    weatherAdvice: weatherAdvice,
                    recommendation: recommendedCommute
                });
            };
            
            if(!plan || !commuteData) return <div className="p-6 text-center">Generating your AI plan...</div>;

            return (
                 <div className="p-6 animate-fade-in space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800">Your AI-Powered Morning Plan</h2>
                    
                    <div className="p-6 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg shadow-md">
                        <h3 className="font-bold text-lg text-blue-800 flex items-center gap-2"><ion-icon name="analytics-outline"></ion-icon> AI Insight</h3>
                        <p className="mt-2 text-blue-700" dangerouslySetInnerHTML={{ __html: plan.insight }}></p>
                        <p className="mt-2 text-blue-700" dangerouslySetInnerHTML={{ __html: plan.foodPlan }}></p>
                    </div>

                    <div className="p-6 bg-white rounded-xl shadow-md">
                        <h3 className="font-bold text-lg text-gray-800 mb-3">Recommended Commute</h3>
                        <div className="p-4 bg-green-100 border border-green-300 rounded-lg">
                             <p className="text-sm text-green-800 mb-2"><ion-icon name="cloudy-outline" class="mr-1"></ion-icon> {plan.weatherAdvice}</p>
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <img src={commuteData.services.find(s => s.name === plan.recommendation.service).icon} alt={plan.recommendation.service} className="w-12 h-12 rounded-full object-cover" />
                                    <div>
                                        <p className="font-bold text-lg">{plan.recommendation.service} {plan.recommendation.type}</p>
                                        <p className="text-gray-600">{plan.recommendation.eta} mins</p>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <p className="font-bold text-lg">‚Çπ{plan.recommendation.price}</p>
                                    <button onClick={() => alert(`Redirecting to ${plan.recommendation.service}...`)} className="text-sm text-blue-600 font-semibold">Book Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                     <div className="p-4 bg-white rounded-xl shadow-md">
                        <h3 className="font-bold text-lg text-gray-800 mb-3">Other Options</h3>
                        <Link to="/commute" state={{ from, to, officeTime }} className="text-blue-600 hover:underline">
                            View all commute options &rarr;
                        </Link>
                    </div>
                </div>
            );
        }

        // --- MAIN LAYOUT & APP ---
        function MainLayout({ children }) {
            const { user, logout } = useAuth();
            const location = useLocation();

            // Pass location state to nav links to preserve it
            const navState = location.state || {};

            return (
                <div className="max-w-lg mx-auto bg-gray-50 min-h-screen flex flex-col shadow-2xl">
                    <header className="flex items-center justify-between p-4 bg-white border-b sticky top-0 z-10">
                        <div className="text-left">
                            <p className="text-sm text-gray-500">{getGreeting()},</p>
                            <p className="font-bold text-xl text-gray-800">{user?.name}</p>
                        </div>
                        <div className="flex items-center gap-4">
                            <h1 className="text-2xl font-bold text-blue-600">ETAIM</h1>
                            <button onClick={logout} className="text-gray-500 hover:text-red-500">
                                <ion-icon name="log-out-outline" style={{ fontSize: '24px' }}></ion-icon>
                            </button>
                        </div>
                    </header>
                    <main className="flex-grow">
                        {children}
                    </main>
                    <footer className="sticky bottom-0 bg-white border-t p-2">
                        <nav className="flex justify-around">
                            <NavLink to="/" state={navState} end className={({isActive}) => `flex flex-col items-center p-2 rounded-lg w-full text-center ${isActive ? 'nav-active' : 'nav-inactive'}`}>
                                <ion-icon name="home-outline"></ion-icon>
                                <span className="text-xs font-semibold">Home</span>
                            </NavLink>
                            <NavLink to="/commute" state={navState} className={({isActive}) => `flex flex-col items-center p-2 rounded-lg w-full text-center ${isActive ? 'nav-active' : 'nav-inactive'}`}>
                                <ion-icon name="car-sport-outline"></ion-icon>
                                <span className="text-xs font-semibold">Commute</span>
                            </NavLink>
                            <NavLink to="/dashboard-view" state={navState} className={({isActive}) => `flex flex-col items-center p-2 rounded-lg w-full text-center ${isActive ? 'nav-active' : 'nav-inactive'}`}>
                                <ion-icon name="analytics-outline"></ion-icon>
                                <span className="text-xs font-semibold">AI Dashboard</span>
                            </NavLink>
                            <NavLink to="/food" state={navState} className={({isActive}) => `flex flex-col items-center p-2 rounded-lg w-full text-center ${isActive ? 'nav-active' : 'nav-inactive'}`}>
                                <ion-icon name="fast-food-outline"></ion-icon>
                                <span className="text-xs font-semibold">Food</span>
                            </NavLink>
                        </nav>
                    </footer>
                </div>
            );
        }

        function App() {
            return (
                <HashRouter>
                    <AuthProvider>
                        <Routes>
                            <Route path="/login" element={<LoginPage />} />
                            <Route path="/*" element={
                                <ProtectedRoute>
                                    <MainLayout>
                                        <Routes>
                                            <Route path="/" element={<HomeScreen />} />
                                            <Route path="/commute" element={<CommuteScreen />} />
                                            <Route path="/food" element={<FoodScreen />} />
                                            <Route path="/dashboard-view" element={<DashboardViewScreen />} />
                                        </Routes>
                                    </MainLayout>
                                </ProtectedRoute>
                            }/>
                        </Routes>
                    </AuthProvider>
                </HashRouter>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>
```
